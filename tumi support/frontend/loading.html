<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connecting to Support - TumiCodes</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Animated Background -->
    <div id="particles-js"></div>
    
    <div class="container">
        <!-- Logo -->
        <div class="logo">
            <h1>TumiCodes Support</h1>
        </div>
        
        <!-- Loading Card -->
        <div class="card loading-screen">
            <!-- Animated Spinner -->
            <div class="loader"></div>
            
            <!-- Connection Status -->
            <div id="connectionStatus" style="font-size: 1.5rem; font-weight: 600;">
                Connecting you to a TumiCodes Support Team Member...
            </div>
            
            <!-- Animated Dots -->
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <!-- Queue Information (if applicable) -->
            <div id="queueInfo" class="queue-status hidden">
                <div style="opacity: 0.8; margin-bottom: 0.5rem;">
                    <i class="fas fa-users"></i>
                    A user is currently on the line...
                </div>
                <div class="queue-number" id="queuePosition">1</div>
                <div style="opacity: 0.8;">
                    You are #<span id="queuePositionText">1</span> in queue
                </div>
                <div style="font-size: 0.9rem; opacity: 0.6; margin-top: 1rem;">
                    <i class="fas fa-info-circle"></i>
                    Estimated wait: <span id="waitTime">2</span> minutes
                </div>
            </div>
            
            <!-- Stats -->
            <div class="stats" style="margin-top: 3rem; opacity: 0.6; font-size: 0.9rem;">
                <div><i class="fas fa-user"></i> Your ID: <span id="userId">Loading...</span></div>
                <div><i class="fas fa-clock"></i> Connected at: <span id="connectTime">Just now</span></div>
                <div><i class="fas fa-users"></i> In queue: <span id="queueSize">0</span> users</div>
            </div>
            
            <!-- Back Button -->
            <button onclick="window.location.href='/'" class="btn btn-secondary mt-3">
                <i class="fas fa-arrow-left"></i>
                Back to Home
            </button>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="script.js"></script>
    
    <script>
        // Update user info on load
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get('userId');
            const position = urlParams.get('position');
            
            if (userId) {
                document.getElementById('userId').textContent = userId.substring(0, 8) + '...';
                localStorage.setItem('tumi_userId', userId);
            }
            
            if (position && position > 0) {
                document.getElementById('queueInfo').classList.remove('hidden');
                document.getElementById('queuePosition').textContent = position;
                document.getElementById('queuePositionText').textContent = position;
                document.getElementById('connectionStatus').textContent = 'Please wait in queue...';
                
                // Calculate estimated wait time (2 minutes per position)
                const waitTime = position * 2;
                document.getElementById('waitTime').textContent = waitTime;
            }
            
            // Update connection time
            const now = new Date();
            document.getElementById('connectTime').textContent = 
                now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        });
    </script>
</body>
</html>